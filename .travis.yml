language: php
php:
   - 5.4
   - 5.5
   - 5.6
   - 7.0
   - hhvm

sudo: false

cache:
   directories:
       - "$HOME/.composer/cache"
       - "$HOME/.php-cs-fixer"

before_script:
   - mkdir -p "$HOME/.php-cs-fixer"
   - composer update

script:
   - vendor/bin/php-cs-fixer fix --cache-file "$HOME/.php-cs-fixer/.php_cs.cache" --dry-run --diff --verbose
   - php bin/Smoke.php
   - php bin/Smoke.php --num_urls=1 analyse   http://www.phmlabs.com/tools/smoke/tests/maxAge.php
   - phpunit --bootstrap vendor/autoload.php test/